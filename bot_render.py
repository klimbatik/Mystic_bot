# bot_render.py
from aiogram import Bot, Dispatcher, F
from aiogram.types import Message
from aiogram.filters import Command

# ะขะพะบะตะฝ ะฑะพัะฐ ะฟััะผะพ ะฒ ะบะพะดะต
BOT_TOKEN = "8219556396:AAGOHmQR1tVrcE4h_V1Nb-B56AthpWXECKE"

# ะกััะปะบะฐ ะฝะฐ ะบะฐะฝะฐะป ะดะปั ะฟะพะดะฟะธัะบะธ
CHANNEL_LINK = "https://t.me/MasterMystic"

bot = Bot(BOT_TOKEN, parse_mode="HTML")
dp = Dispatcher()

# โโโ ะฝะพัะผะฐะปะธะทะฐัะธั ะดะพ 1..22 โโโ
def norm22(n: int) -> int:
ย ย while n > 22:
ย ย ย ย n = sum(int(d) for d in str(n))
ย ย return n

# โโโ ัะฐัััั ัะฒะพััะฐ โโโ
def calc_tail(day: int, month: int, year: int):
ย ย A = norm22(day)
ย ย B = norm22(month)
ย ย C = norm22(sum(int(d) for d in str(year)))
ย ย D = norm22(A + B + C)
ย ย E = norm22(A + B + C + D)
ย ย M = norm22(D + E)
ย ย N = norm22(M + D)
ย ย return (M, N, D)

# โโโ ะฟะพะปะฝัะน ัะปะพะฒะฐัั 26 ะบะฐัะผะธัะตัะบะธั ัะฒะพััะพะฒ โโโ
TAILS = {
ย ย (18,6,6): "ะัะฑะพะฒะฝะฐั ะผะฐะณะธั โ ะพะฟัั ัะธะปัะฝะพะน ะทะฐะฒะธัะธะผะพััะธ/ะฟัะธะฒัะทะบะธ.",
ย ย (9,9,18): "ะะพะปัะตะฑะฝะธะบ, ะผะฐะณะธัะตัะบะธะต ะทะฝะฐะฝะธั โ ะดะพัััะฟ ะบ ัะฐะนะฝัะผ ะทะฝะฐะฝะธัะผ.",
ย ย (9,18,9): "ะะฐะณะธัะตัะบะฐั ะถะตััะฒะฐ โ ัะตะผะฐ ะถะตััะฒะตะฝะฝะพััะธ ัะฐะดะธ ะธะดะตะธ/ัะธััะฐะปะฐ.",
ย ย (18,9,9): "ะะพะปัะตะฑะฝะธะบ. ะััะตะปัะฝะธัะตััะฒะพ โ ะธะทะพะปััะธั ัะฐะดะธ ะทะฝะฐะฝะธะน.",
ย ย (6,5,17): "ะะพัะดัะฝั โ ะธัะฟััะฐะฝะธะต ัะปะฐะฒะพะน ะธ ัะฐะผะพัะตะฝะฝะพัััั.",
ย ย (15,20,5): "ะัะฝัะฐัั โ ัะพะฟัะพัะธะฒะปะตะฝะธะต ัััะฐะฝะพะฒะปะตะฝะฝัะผ ะฟัะฐะฒะธะปะฐะผ.",
ย ย (15,5,8): "ะัะตะดะฐัะตะปัััะฒะฐ, ัััะฐััะธ ะฒ ัะตะผัะต โ ะธัะฟััะฐะฝะธั ะฒ ัะพะดะต.",
ย ย (3,9,12): "ะะดะธะฝะพะบะฐั ะถะตะฝัะธะฝะฐ โ ะฟััั ัะตัะตะท ะพะดะธะฝะพัะตััะฒะพ ะธ ัะฐะผะพะฟะพะทะฝะฐะฝะธะต.",
ย ย (3,12,9): "ะะดะธะฝะพะบะฐั ะถะตะฝัะธะฝะฐ โ ะฟััั ัะตัะตะท ะพะดะธะฝะพัะตััะฒะพ ะธ ัะฐะผะพะฟะพะทะฝะฐะฝะธะต.",
ย ย (9,12,3): "ะะดะธะฝะพะบะฐั ะถะตะฝัะธะฝะฐ โ ะฟััั ัะตัะตะท ะพะดะธะฝะพัะตััะฒะพ ะธ ัะฐะผะพะฟะพะทะฝะฐะฝะธะต.",
ย ย (15,8,11): "ะคะธะทะธัะตัะบะฐั ะฐะณัะตััะธั โ ัะฐะฑะพัะฐ ั ะฒะฝัััะตะฝะฝะธะผ ะณะฝะตะฒะพะผ.",
ย ย (9,15,6): "ะะธั ัััะฐััะตะน ะธ ัะบะฐะทะพะบ โ ัะบะปะพะฝะฝะพััั ะบ ะธะปะปัะทะธัะผ.",
ย ย (6,17,11): "ะะฐะณัะฑะปะตะฝะฝัะน ัะฐะปะฐะฝั โ ัะบััััะต ัะฟะพัะพะฑะฝะพััะธ ะธ ะฝะตะดะพะพัะตะฝะบะฐ.",
ย ย (12,19,7): "ะะพะธะฝ โ ะฑะพััะฑะฐ ะทะฐ ะฟัะฐะฒะดั ะธ ัะฟัะฐะฒะตะดะปะธะฒะพััั.",
ย ย (21,4,10): "ะฃะณะฝะตััะฝะฝะฐั ะดััะฐ โ ะฒะฝัััะตะฝะฝะธะต ะพะณัะฐะฝะธัะตะฝะธั ะธ ะฑะปะพะบะธ.",
ย ย (12,16,4): "ะะผะฟะตัะฐัะพั โ ัะธะปะฐ ะฒะพะปะธ, ะบะพะฝััะพะปั ะธ ะปะธะดะตัััะฒะพ.",
ย ย (3,22,19): "ะะต ัะพะถะดะตะฝะฝะพะต ะดะธัั โ ะบะฐัะผะธัะตัะบะธะต ัััะฐัั ะธ ะฟะพัะตัะธ.",
ย ย (21,10,16): "ะััะพะฒะฝัะน ะถัะตั โ ัะฐะฑะพัะฐ ั ะฒะฝัััะตะฝะฝะธะผะธ ะทะฝะฐะฝะธัะผะธ ะธ ะผะธััะธะบะพะน.",
ย ย (6,8,20): "ะะฐะทะพัะฐัะพะฒะฐะฝะธะต ัะพะดะฐ โ ะบะฐัะผะธัะตัะบะธะต ะพัะธะฑะบะธ ะฟัะตะดะบะพะฒ.",
ย ย (3,7,22): "ะฃะทะฝะธะบ โ ะพะณัะฐะฝะธัะตะฝะธั ะธ ะทะฐะฒะธัะธะผะพััั ะพั ะพะฑััะพััะตะปัััะฒ.",
ย ย (9,3,21): "ะะฐะดะทะธัะฐัะตะปั โ ะบะพะฝััะพะปั ะธ ะฝะฐะฑะปัะดะตะฝะธะต ะฝะฐะด ะดััะณะธะผะธ.",
ย ย (21,7,13): "ะะฐะทัััะตะฝะธะต ะธ ัะผะตััั ะผะฝะพะณะธะผ ะดััะฐะผ โ ััะถะตะปะฐั ะบะฐัะผะฐ ัะพะดะฐ.",
ย ย (18,6,15): "ะขัะผะฝัะน ะผะฐะณ โ ัะธะปะฐ ะธ ะผะฐะฝะธะฟัะปััะธะธ ัะฝะตัะณะธะตะน.",
ย ย (6,20,14): "ะััะฐ, ะบะพัะพััั ะฟัะธะฝะตัะปะธ ะฒ ะถะตััะฒั โ ะฟััั ัะตัะตะท ะถะตััะฒะตะฝะฝะพััั.",
ย ย (21,10,7): "ะะพะธะฝ ะฒะตัั โ ะดััะพะฒะฝัะต ะธัะฟััะฐะฝะธั ะธ ะฒะตัะฐ.",
ย ย (3,13,10): "ะกัะธัะธะด โ ััะพะบะธ ัะตัะตะท ะบัะธะทะธัั ะธ ะพััะฐัะฝะธะต.",
ย ย (12,18,3): "ะคะธะทะธัะตัะบะธะต ัััะฐะดะฐะฝะธั โ ะธัะฟััะฐะฝะธั ัะตะปะพะผ ะธ ะดััะพะผ.",
ย ย (18,3,12): "ะคะธะทะธัะตัะบะธะต ัััะฐะดะฐะฝะธั โ ะธัะฟััะฐะฝะธั ัะตะปะพะผ ะธ ะดััะพะผ.",
}

def describe_tail(triplet):
ย ย return TAILS.get(triplet, "ะะตะธะทะฒะตััะฝัะน ัะฒะพัั โ ะพะฟะธัะฐะฝะธะต ะฟะพะบะฐ ะพััััััะฒัะตั.")

# โโโ ะบะพะผะฐะฝะดั ะฑะพัะฐ โโโ
@dp.message(Command("start"))
async def start(message: Message):
ย ย await message.answer(
ย ย ย ย "ะัะธะฒะตั! ะฏ ะฑะพั Master Mystic ๐ฟ\n"
ย ย ย ย "ะฏ ะผะพะณั ัะฐัััะธัะฐัั ัะฒะพะน ะบะฐัะผะธัะตัะบะธะน ัะฒะพัั.\n\n"
ย ย ย ย "ะัะฟะพะปัะทัะน ะบะพะผะฐะฝะดั:\n"
ย ย ย ย "/tail ะะ.ะะ.ะะะะ โ ััะพะฑั ัะทะฝะฐัั ัะฒะพะน ัะฒะพัั.\n"
ย ย )

@dp.message(Command("tail"))
async def tail_command(message: Message):
ย ย parts = message.text.split(maxsplit=1)
ย ย if len(parts) < 2:
ย ย ย ย await message.reply("ะฃะบะฐะถะธ ะดะฐัั ะฒ ัะพัะผะฐัะต: /tail ะะ.ะะ.ะะะะ")
ย ย ย ย return
ย ย try:
ย ย ย ย day, month, year = map(int, parts[1].split("."))
ย ย except:
ย ย ย ย await message.reply("ะะตะฒะตัะฝัะน ัะพัะผะฐั. ะัะฟะพะปัะทัะน: ะะ.ะะ.ะะะะ")
ย ย ย ย return

ย ย tail_triplet = calc_tail(day, month, year)
ย ย description = describe_tail(tail_triplet)
ย ย await message.answer(
ย ย ย ย f"ะขะฒะพะน ะบะฐัะผะธัะตัะบะธะน ัะฒะพัั: {tail_triplet[0]}-{tail_triplet[1]}-{tail_triplet[2]}\n"
ย ย ย ย f"{description}\n\n"
ย ย ย ย f"ะัะปะธ ัะพัะตัั ะฟะพะปััะฐัั ะตัั ะฑะพะปััะต ะทะฝะฐะฝะธะน ะธ ะผะฐะณะธัะตัะบะธั ะฟะพะดัะบะฐะทะพะบ โ ะฟะพะดะฟะธัะธัั ะฝะฐ ะผะพะน ะบะฐะฝะฐะป: {CHANNEL_LINK}"
ย ย )

if __name__ == "__main__":
ย ย import asyncio
ย ย asyncio.run(dp.start_polling(bot))
